<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Mahasiswa</title>
    <style>
        :root {
            --bg-color: #f7f7f5;
            --text-color: #111111;
            --muted-text: #666666;
            --table-border: #e5e5e5;
            --table-header-bg: #f0f0ee;
            --button-bg: #1b8301;
            --button-hover: #222222;
            --error-color: #b00020;
            --card-bg: #ffffff;
            --focus-ring: #111111;
        }

        [data-theme="dark"] {
            --bg-color: #0f0f0f;
            --text-color: #f5f5f5;
            --muted-text: #b3b3b3;
            --table-border: #2a2a2a;
            --table-header-bg: #1a1a1a;
            --button-bg: #f5f5f5;
            --button-hover: #dddddd;
            --error-color: #ff6b6b;
            --card-bg: #151515;
            --focus-ring: #f5f5f5;
        }

        body {
            font-family: "Palatino Linotype", "Book Antiqua", Palatino, serif;
            margin: 32px auto;
            padding: 0 16px;
            max-width: 1000px;
            background-color: var(--bg-color);
            color: var(--text-color);
            transition: background-color 0.3s, color 0.3s;
        }

        h1 {
            color: var(--text-color);
            letter-spacing: 0.2px;
            margin: 0 0 12px 0;
        }

        form { margin-bottom: 18px; }

        input {
            margin: 6px 6px 6px 0;
            padding: 10px 12px;
            background-color: var(--card-bg);
            color: var(--text-color);
            border: 1px solid var(--table-border);
            border-radius: 6px;
            outline: none;
        }

        input:focus {
            border-color: var(--focus-ring);
            box-shadow: 0 0 0 2px rgba(0, 0, 0, 0.08);
        }

        button {
            padding: 10px 14px;
            background: var(--button-bg);
            color: var(--bg-color);
            border: 1px solid var(--button-bg);
            border-radius: 6px;
            cursor: pointer;
            transition: background-color 0.2s, border-color 0.2s;
        }

        button:hover {
            background: var(--button-hover);
            border-color: var(--button-hover);
        }

        .error { color: var(--error-color); }

        a {
            color: var(--text-color);
            text-decoration: none;
            border-bottom: 1px solid var(--table-border);
        }

        a:hover { border-bottom-color: var(--text-color); }

        .theme-toggle,
        .lang-toggle {
            position: fixed;
            top: 20px;
            padding: 8px;
            background: var(--card-bg);
            color: var(--text-color);
            border: 1px solid var(--table-border);
            border-radius: 50%;
            cursor: pointer;
            width: 40px;
            height: 40px;
            font-size: 16px;
            transition: background-color 0.2s, border-color 0.2s;
        }

        .theme-toggle { right: 20px; }
        .lang-toggle { right: 70px; font-size: 12px; font-weight: 600; }

        .theme-toggle:hover,
        .lang-toggle:hover {
            background: var(--table-header-bg);
            border-color: var(--table-header-bg);
        }
    </style>
    <script>
        function toggleTheme() {
            const html = document.documentElement;
            const currentTheme = html.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';

            html.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
        }

        function loadTheme() {
            const savedTheme = localStorage.getItem('theme') || 'light';
            document.documentElement.setAttribute('data-theme', savedTheme);
        }

        const translations = {
            id: {
                edit_title: 'Edit Mahasiswa',
                name_placeholder: 'Nama',
                nim_placeholder: 'NIM',
                grade_placeholder: 'Nilai',
                update_student: 'Update Mahasiswa',
                back_to_list: 'Kembali ke Daftar Mahasiswa',
                update_success: 'Data berhasil diubah!'
            },
            en: {
                edit_title: 'Edit Student',
                name_placeholder: 'Name',
                nim_placeholder: 'NIM',
                grade_placeholder: 'Grade',
                update_student: 'Update Student',
                back_to_list: 'Back to Student List',
                update_success: 'Data successfully updated!'
            }
        };

        function toggleLanguage() {
            const currentLang = localStorage.getItem('language') || 'id';
            const newLang = currentLang === 'id' ? 'en' : 'id';
            
            localStorage.setItem('language', newLang);
            applyLanguage(newLang);
            updateLangButton(newLang);
        }

        function applyLanguage(lang) {
            const langData = translations[lang];
            
            // Update elements with data-i18n
            document.querySelectorAll('[data-i18n]').forEach(element => {
                const key = element.getAttribute('data-i18n');
                if (langData[key]) {
                    if (element.tagName === 'INPUT' && element.hasAttribute('data-i18n-placeholder')) {
                        element.placeholder = langData[key];
                    } else {
                        element.textContent = langData[key];
                    }
                }
            });
        }

        function updateLangButton(lang) {
            const button = document.querySelector('.lang-toggle');
            button.textContent = lang === 'id' ? 'ID' : 'EN';
        }

        function loadLanguage() {
            const savedLang = localStorage.getItem('language') || 'id';
            applyLanguage(savedLang);
            updateLangButton(savedLang);
        }

        document.addEventListener('DOMContentLoaded', function() {
            loadTheme();
            loadLanguage();
        });
    </script>
</head>
<body>
    <button class="theme-toggle" onclick="toggleTheme()" title="Toggle Dark/Light Mode">ðŸŒ™</button>
    <button class="lang-toggle" onclick="toggleLanguage()" title="Toggle Language">ðŸ‡®ðŸ‡©</button>
    <h1 data-i18n="edit_title">Edit Mahasiswa</h1>
    {{if .error}}
        <p class="error">{{.error}}</p>
    {{end}}
    {{if .success}}
        <p style="color: green;" data-i18n="update_success">Data berhasil diubah!</p>
    {{end}}
    <form action="/edit" method="post">
        <input type="hidden" name="id" value="{{.mahasiswa.ID}}">
        <input type="text" name="nama" data-i18n-placeholder="name_placeholder" placeholder="Nama" value="{{.mahasiswa.Nama}}" required>
        <input type="text" name="nim" data-i18n-placeholder="nim_placeholder" placeholder="NIM" value="{{.mahasiswa.NIM}}" required>
        <input type="number" step="0.01" min="0" max="4" name="nilai" data-i18n-placeholder="grade_placeholder" placeholder="Nilai" value="{{.mahasiswa.Nilai}}" required>
        <button type="submit" data-i18n="update_student">Update Mahasiswa</button>
    </form>
    <a href="/" data-i18n="back_to_list">Kembali ke Daftar Mahasiswa</a>
</body>
</html>
